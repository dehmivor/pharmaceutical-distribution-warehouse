<?xml version="1.0" encoding="UTF-8"?>
<testsuites name="jest tests" tests="3" failures="3" errors="0" time="0.662">
  <testsuite name="Stripe Service" errors="0" failures="3" skipped="0" timestamp="2025-06-25T20:30:26" time="0.59" tests="3">
    <testcase classname="Stripe Service tạo payment intent thành công" name="Stripe Service tạo payment intent thành công" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;client_secret&apos;)
    at client_secret (D:\end-iter1\pharmaceutical-distribution-warehouse\server\src\services\stripeService.js:10:24)
    at Object.&lt;anonymous&gt; (D:\end-iter1\pharmaceutical-distribution-warehouse\server\src\services\stripeService.test.js:33:20)</failure>
    </testcase>
    <testcase classname="Stripe Service xử lý lỗi khi tạo payment intent" name="Stripe Service xử lý lỗi khi tạo payment intent" time="0.022">
      <failure>Error: expect(received).rejects.toThrow(expected)

Expected substring: &quot;Stripe API error&quot;
Received message:   &quot;Cannot read properties of undefined (reading &apos;client_secret&apos;)&quot;

       8 |     currency,
       9 |   });
    &gt; 10 |   return paymentIntent.client_secret;
         |                        ^
      11 | }
      12 |
      13 | module.exports = { createPaymentIntent };

      at client_secret (src/services/stripeService.js:10:24)
      at Object.&lt;anonymous&gt; (src/services/stripeService.test.js:50:5)
    at Object.toThrow (D:\end-iter1\pharmaceutical-distribution-warehouse\server\node_modules\expect\build\index.js:2151:20)
    at Object.toThrow (D:\end-iter1\pharmaceutical-distribution-warehouse\server\src\services\stripeService.test.js:50:65)
    at Promise.finally.completed (D:\end-iter1\pharmaceutical-distribution-warehouse\server\node_modules\jest-circus\build\jestAdapterInit.js:1559:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (D:\end-iter1\pharmaceutical-distribution-warehouse\server\node_modules\jest-circus\build\jestAdapterInit.js:1499:10)
    at _callCircusTest (D:\end-iter1\pharmaceutical-distribution-warehouse\server\node_modules\jest-circus\build\jestAdapterInit.js:1009:40)
    at _runTest (D:\end-iter1\pharmaceutical-distribution-warehouse\server\node_modules\jest-circus\build\jestAdapterInit.js:949:3)
    at _runTestsForDescribeBlock (D:\end-iter1\pharmaceutical-distribution-warehouse\server\node_modules\jest-circus\build\jestAdapterInit.js:839:13)
    at _runTestsForDescribeBlock (D:\end-iter1\pharmaceutical-distribution-warehouse\server\node_modules\jest-circus\build\jestAdapterInit.js:829:11)
    at run (D:\end-iter1\pharmaceutical-distribution-warehouse\server\node_modules\jest-circus\build\jestAdapterInit.js:757:3)
    at runAndTransformResultsToJestFormat (D:\end-iter1\pharmaceutical-distribution-warehouse\server\node_modules\jest-circus\build\jestAdapterInit.js:1920:21)
    at jestAdapter (D:\end-iter1\pharmaceutical-distribution-warehouse\server\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (D:\end-iter1\pharmaceutical-distribution-warehouse\server\node_modules\jest-runner\build\index.js:272:16)
    at runTest (D:\end-iter1\pharmaceutical-distribution-warehouse\server\node_modules\jest-runner\build\index.js:340:7)</failure>
    </testcase>
    <testcase classname="Stripe Service kiểm tra xử lý currency không hợp lệ" name="Stripe Service kiểm tra xử lý currency không hợp lệ" time="0.004">
      <failure>Error: expect(received).rejects.toThrow(expected)

Expected substring: &quot;Invalid currency: usd&quot;
Received message:   &quot;Cannot read properties of undefined (reading &apos;client_secret&apos;)&quot;

       8 |     currency,
       9 |   });
    &gt; 10 |   return paymentIntent.client_secret;
         |                        ^
      11 | }
      12 |
      13 | module.exports = { createPaymentIntent };

      at client_secret (src/services/stripeService.js:10:24)
      at Object.&lt;anonymous&gt; (src/services/stripeService.test.js:62:5)
    at Object.toThrow (D:\end-iter1\pharmaceutical-distribution-warehouse\server\node_modules\expect\build\index.js:2151:20)
    at Object.toThrow (D:\end-iter1\pharmaceutical-distribution-warehouse\server\src\services\stripeService.test.js:62:72)
    at Promise.finally.completed (D:\end-iter1\pharmaceutical-distribution-warehouse\server\node_modules\jest-circus\build\jestAdapterInit.js:1559:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (D:\end-iter1\pharmaceutical-distribution-warehouse\server\node_modules\jest-circus\build\jestAdapterInit.js:1499:10)
    at _callCircusTest (D:\end-iter1\pharmaceutical-distribution-warehouse\server\node_modules\jest-circus\build\jestAdapterInit.js:1009:40)
    at _runTest (D:\end-iter1\pharmaceutical-distribution-warehouse\server\node_modules\jest-circus\build\jestAdapterInit.js:949:3)
    at _runTestsForDescribeBlock (D:\end-iter1\pharmaceutical-distribution-warehouse\server\node_modules\jest-circus\build\jestAdapterInit.js:839:13)
    at _runTestsForDescribeBlock (D:\end-iter1\pharmaceutical-distribution-warehouse\server\node_modules\jest-circus\build\jestAdapterInit.js:829:11)
    at run (D:\end-iter1\pharmaceutical-distribution-warehouse\server\node_modules\jest-circus\build\jestAdapterInit.js:757:3)
    at runAndTransformResultsToJestFormat (D:\end-iter1\pharmaceutical-distribution-warehouse\server\node_modules\jest-circus\build\jestAdapterInit.js:1920:21)
    at jestAdapter (D:\end-iter1\pharmaceutical-distribution-warehouse\server\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (D:\end-iter1\pharmaceutical-distribution-warehouse\server\node_modules\jest-runner\build\index.js:272:16)
    at runTest (D:\end-iter1\pharmaceutical-distribution-warehouse\server\node_modules\jest-runner\build\index.js:340:7)</failure>
    </testcase>
  </testsuite>
</testsuites>